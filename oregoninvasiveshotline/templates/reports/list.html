{% extends 'base.html' %}

{% load static %}


{% block title %}Report List{% endblock %}
{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js@11.1.0/public/assets/styles/choices.min.css"/>
{% endblock %}
{% block body_class %}report-page white{% endblock %}
{% block main_class %}container-fluid{% endblock %}

{% block content %}
{% include 'nav_tabs.html' with tab=tab %}
{% load django_bootstrap5 %}

    <div class="tab-content">
        <div class="tab-pane active" id="{{ tab }}">
            <form class="form-inline">
                <div class="row">
                    <div class="col-lg-7">
                      <span class="strong w-full">Search</span><br/>
                      {% include 'reports/search/_fields.html' %}
                    </div>
                    <div class="col-lg-5">
                        <div class="row">
                          <div class="col-lg-6">
                            <label class="strong" for="id_counties_input" class="strong">Counties</label>
                            {% bootstrap_field form.counties %}
                          </div>
                          <div class="col-lg-6">
                            <label class="strong" for="id_categories_input">Categories</label>
                            <a href="{% url 'reports-help' %}?modal=true"
                               class="modal-remote help"
                               title="Category legend">
                              <span class="bi bi-question-circle"></span>
                              <span class="visually-hidden">[?]</span>
                            </a>
                            {% bootstrap_field form.categories %}
                          </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex flex-wrap align-items-center gap-3 pt-3">
                  <span class="fw-bold me-2 mb-3">Filters</span>
                  {% bootstrap_field form.claimed_by class="mb-0" label_class="visually-hidden" %}
                  {% bootstrap_field form.is_public class="mb-0" label_class="visually-hidden" %}
                  {% bootstrap_field form.is_archived class="mb-0" label_class="visually-hidden" %}
                  {% if form.source %}{% bootstrap_field form.source class="mb-0" label_class="visually-hidden" %}{% endif %}
                </div>
                <div class="row">
                  {{ form.non_field_errors }}
                </div>
            </form>
            {% include 'reports/_list.html' %}
        </div>
    </div>
{% endblock %}

{% block js %}
    {{ block.super }}
    {% include 'reports/_list.js.html' %}
{% endblock %}
